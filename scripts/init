#!/bin/bash

set -e

DOTFILES_DIR="$(cd "$(dirname "$0")/.." && pwd)"

echo "Bootstrapping dotfiles..."
echo ""

if ! command -v brew &> /dev/null; then
  echo "Installing Homebrew..."
  /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
  eval "$(/opt/homebrew/bin/brew shellenv)"
else
  echo "Homebrew already installed"
fi

echo ""
echo "Installing dependencies..."
brew install stow gh max-sixty/worktrunk/wt
wt config shell install

echo ""
echo "Symlinking dotfiles..."
cd "$DOTFILES_DIR"
make reload

echo ""
echo "Done! Restart your terminal or run: source ~/.zshrc"
